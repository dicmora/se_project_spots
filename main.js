!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=(e,t,o)=>{const r=e.querySelector(`#${t.id}-error`);t.classList.remove(o.inputErrorClass),r.textContent="",r.classList.remove(o.errorClass)},o=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},r=(e,t,r)=>{(e=>e.some(e=>!e.validity.valid))(e)?o(t,r):((e,t)=>{e.disabled=!1,e.classList.remove(t.inactiveButtonClass)})(t,r)};function n(e){e.classList.add("modal_is-opened"),document.addEventListener("keydown",s)}function a(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",s)}function s(e){"Escape"===e.key&&document.querySelectorAll(".modal.modal_is-opened").forEach(a)}document.querySelectorAll(".modal").forEach(function(e){const t=e.querySelector(".modal__close-btn, .modal__Previewclose-btn");t&&t.addEventListener("click",()=>a(e)),e.addEventListener("mousedown",t=>{t.target===e&&a(e)})});const c=document.querySelector(".profile__edit-btn"),l=document.querySelector("#edit-profile-modal"),i=l.querySelector(".modal__form"),d=l.querySelector("#profile-name-input"),u=l.querySelector("#profile-description-input"),m=document.querySelector(".profile__name"),p=document.querySelector(".profile__description"),_=document.querySelector(".profile__add-btn"),y=document.querySelector("#new-post-modal"),f=y.querySelector(".modal__form"),v=y.querySelector("#card-caption-input"),S=y.querySelector("#card-image-input"),q=f.querySelector(".modal__submit-btn"),g=document.querySelector("#preview-modal"),b=g.querySelector(".modal__image"),h=g.querySelector(".modal__caption"),w=document.querySelector("#card-template"),E=document.querySelector(".cards__list");function L(e,t="prepend"){const o=function(e){const t=w.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),r=t.querySelector(".card__image");o.textContent=e.name,r.src=e.link,r.alt=e.name;const a=t.querySelector(".card__like-btn");return a.addEventListener("click",()=>{a.classList.toggle("card__like-btn_active")}),t.querySelector(".card__del-btn").addEventListener("click",()=>{t.remove()}),r.addEventListener("click",()=>{b.src=e.link,b.alt=e.name,h.textContent=e.name,n(g)}),t}(e);E[t](o)}var k;c.addEventListener("click",()=>{var o,r;d.value=m.textContent,u.value=p.textContent,o=i,r=e,[d,u].forEach(e=>{t(o,e,r)}),n(l)}),_.addEventListener("click",()=>{n(y)}),i.addEventListener("submit",e=>{e.preventDefault(),m.textContent=d.value,p.textContent=u.value,a(l)}),f.addEventListener("submit",t=>{t.preventDefault(),L({name:v.value,link:S.value}),f.reset(),o(q,e),a(y)}),[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach(e=>L(e,"append")),k=e,document.querySelectorAll(k.formSelector).forEach(e=>{((e,o)=>{const n=Array.from(e.querySelectorAll(o.inputSelector)),a=e.querySelector(o.submitButtonSelector);r(n,a,o),n.forEach(s=>{s.addEventListener("input",function(){((e,o,r)=>{o.validity.valid?t(e,o,r):((e,t,o,r)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.add(r.inputErrorClass),n.textContent=o,n.classList.add(r.errorClass),o&&(n.style.marginTop="8px")})(e,o,o.validationMessage,r)})(e,s,o),r(n,a,o)})})})(e,k)})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBR08sTUFBTUEsRUFBVyxDQUN0QkMsYUFBYyxlQUNkQyxjQUFlLGdCQUNmQyxxQkFBc0IscUJBQ3RCQyxvQkFBcUIsNkJBQ3JCQyxnQkFBaUIsMEJBQ2pCQyxXQUFZLHdCQW1CREMsRUFBaUJBLENBQUNDLEVBQWFDLEVBQWNDLEtBQ3hELE1BQU1DLEVBQWVILEVBQVlJLGNBQWMsSUFBSUgsRUFBYUksWUFDaEVKLEVBQWFLLFVBQVVDLE9BQU9MLEVBQU9MLGlCQUNyQ00sRUFBYUssWUFBYyxHQUMzQkwsRUFBYUcsVUFBVUMsT0FBT0wsRUFBT0osYUFTMUJXLEVBQWdCQSxDQUFDQyxFQUFlUixLQUMzQ1EsRUFBY0MsVUFBVyxFQUN6QkQsRUFBY0osVUFBVU0sSUFBSVYsRUFBT04sc0JBY3hCaUIsRUFBb0JBLENBQUNDLEVBQVdKLEVBQWVSLEtBdEI1QlksSUFDdkJBLEVBQVVDLEtBQU1kLElBQ2JBLEVBQWFlLFNBQVNDLE9BcUI1QkMsQ0FBZ0JKLEdBQ2xCTCxFQUFjQyxFQUFlUixHQWJMaUIsRUFBQ1QsRUFBZVIsS0FDMUNRLEVBQWNDLFVBQVcsRUFDekJELEVBQWNKLFVBQVVDLE9BQU9MLEVBQU9OLHNCQWFwQ3VCLENBQWFULEVBQWVSLElDbEJoQyxTQUFTa0IsRUFBVUMsR0FDakJBLEVBQU1mLFVBQVVNLElBQUksbUJBQ3BCVSxTQUFTQyxpQkFBaUIsVUFBV0MsRUFDdkMsQ0FFQSxTQUFTQyxFQUFXSixHQUNsQkEsRUFBTWYsVUFBVUMsT0FBTyxtQkFDdkJlLFNBQVNJLG9CQUFvQixVQUFXRixFQUMxQyxDQUVBLFNBQVNBLEVBQWFHLEdBQ04sV0FBVkEsRUFBRUMsS0FDSk4sU0FBU08saUJBQWlCLDBCQUEwQkMsUUFBUUwsRUFFaEUsQ0FpQkFILFNBQVNPLGlCQUFpQixVQUFVQyxRQWZwQyxTQUFvQlQsR0FDbEIsTUFBTVUsRUFBV1YsRUFBTWpCLGNBQ3JCLCtDQUVFMkIsR0FDRkEsRUFBU1IsaUJBQWlCLFFBQVMsSUFBTUUsRUFBV0osSUFHdERBLEVBQU1FLGlCQUFpQixZQUFjSSxJQUMvQkEsRUFBRUssU0FBV1gsR0FDZkksRUFBV0osSUFHakIsR0FJQSxNQUFNWSxFQUFpQlgsU0FBU2xCLGNBQWMsc0JBQ3hDOEIsRUFBbUJaLFNBQVNsQixjQUFjLHVCQUMxQytCLEVBQXFCRCxFQUFpQjlCLGNBQWMsZ0JBQ3BEZ0MsRUFBdUJGLEVBQWlCOUIsY0FDNUMsdUJBRUlpQyxFQUF5QkgsRUFBaUI5QixjQUM5Qyw4QkFFSWtDLEVBQXFCaEIsU0FBU2xCLGNBQWMsa0JBQzVDbUMsRUFBNEJqQixTQUFTbEIsY0FDekMseUJBR0lvQyxFQUFhbEIsU0FBU2xCLGNBQWMscUJBQ3BDcUMsRUFBZW5CLFNBQVNsQixjQUFjLG1CQUN0Q3NDLEVBQXFCRCxFQUFhckMsY0FBYyxnQkFDaER1QyxFQUFlRixFQUFhckMsY0FBYyx1QkFDMUN3QyxFQUFnQkgsRUFBYXJDLGNBQWMscUJBQzNDeUMsRUFDSkgsRUFBbUJ0QyxjQUFjLHNCQUU3QjBDLEVBQWV4QixTQUFTbEIsY0FBYyxrQkFDdEMyQyxFQUFzQkQsRUFBYTFDLGNBQWMsaUJBQ2pENEMsRUFDSkYsRUFBYTFDLGNBQWMsbUJBRXZCNkMsRUFBZTNCLFNBQVNsQixjQUFjLGtCQUN0QzhDLEVBQVc1QixTQUFTbEIsY0FBYyxnQkFpQ3hDLFNBQVMrQyxFQUFXQyxFQUFVQyxFQUFTLFdBQ3JDLE1BQU1DLEVBaENSLFNBQXdCQyxHQUN0QixNQUFNRCxFQUFjTCxFQUFhTyxRQUM5QnBELGNBQWMsU0FDZHFELFdBQVUsR0FDUEMsRUFBbUJKLEVBQVlsRCxjQUFjLGdCQUM3Q3VELEVBQW1CTCxFQUFZbEQsY0FBYyxnQkFFbkRzRCxFQUFpQmxELFlBQWMrQyxFQUFLSyxLQUNwQ0QsRUFBaUJFLElBQU1OLEVBQUtPLEtBQzVCSCxFQUFpQkksSUFBTVIsRUFBS0ssS0FFNUIsTUFBTUksRUFBVVYsRUFBWWxELGNBQWMsbUJBaUIxQyxPQWhCQTRELEVBQVF6QyxpQkFBaUIsUUFBUyxLQUNoQ3lDLEVBQVExRCxVQUFVMkQsT0FBTywyQkFHVFgsRUFBWWxELGNBQWMsa0JBQ2xDbUIsaUJBQWlCLFFBQVMsS0FDbEMrQixFQUFZL0MsV0FHZG9ELEVBQWlCcEMsaUJBQWlCLFFBQVMsS0FDekN3QixFQUFvQmMsSUFBTU4sRUFBS08sS0FDL0JmLEVBQW9CZ0IsSUFBTVIsRUFBS0ssS0FDL0JaLEVBQTJCeEMsWUFBYytDLEVBQUtLLEtBQzlDeEMsRUFBVTBCLEtBR0xRLENBQ1QsQ0FHc0JZLENBQWVkLEdBQ25DRixFQUFTRyxHQUFRQyxFQUNuQixDRDlDTyxJQUEwQnBELEVDZ0RqQytCLEVBQWVWLGlCQUFpQixRQUFTLEtEM0ZWNEMsSUFBQ25FLEVBQXdCRSxFQzRGdERrQyxFQUFxQmdDLE1BQVE5QixFQUFtQjlCLFlBQ2hENkIsRUFBdUIrQixNQUFRN0IsRUFBMEIvQixZRDdGM0JSLEVDZ0c1Qm1DLEVEaEdvRGpDLEVDa0dwRFYsRUFEQSxDQUFDNEMsRUFBc0JDLEdEaEdmUCxRQUFTdUMsSUFDakJ0RSxFQUFlQyxFQUFhcUUsRUFBT25FLEtDbUdyQ2tCLEVBQVVjLEtBR1pNLEVBQVdqQixpQkFBaUIsUUFBUyxLQUNuQ0gsRUFBVXFCLEtBR1pOLEVBQW1CWixpQkFBaUIsU0FBV0ksSUFDN0NBLEVBQUUyQyxpQkFDRmhDLEVBQW1COUIsWUFBYzRCLEVBQXFCZ0MsTUFDdEQ3QixFQUEwQi9CLFlBQWM2QixFQUF1QitCLE1BQy9EM0MsRUFBV1MsS0FHYlEsRUFBbUJuQixpQkFBaUIsU0FBV0ksSUFDN0NBLEVBQUUyQyxpQkFDRm5CLEVBQVcsQ0FDVFMsS0FBTWpCLEVBQWF5QixNQUNuQk4sS0FBTWxCLEVBQWN3QixRQUV0QjFCLEVBQW1CNkIsUUFDbkI5RCxFQUFjb0MsRUFBcUJyRCxHQUNuQ2lDLEVBQVdnQixLQTlKUSxDQUNuQixDQUNFbUIsS0FBTSxxQkFDTkUsS0FBTSw4SEFFUixDQUNFRixLQUFNLHFCQUNORSxLQUFNLG1IQUVSLENBQ0VGLEtBQU0sa0JBQ05FLEtBQU0seUhBRVIsQ0FDRUYsS0FBTSw0REFDTkUsS0FBTSwySEFFUixDQUNFRixLQUFNLDRCQUNORSxLQUFNLDBIQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sNEhBMElHaEMsUUFBUzBDLEdBQVNyQixFQUFXcUIsRUFBTSxXRG5GZnRFLEVDcUZoQlYsRURwRkU4QixTQUFTTyxpQkFBaUIzQixFQUFPVCxjQUN6Q3FDLFFBQVM5QixJQWxCYXlFLEVBQUN6RSxFQUFhRSxLQUM3QyxNQUFNWSxFQUFZNEQsTUFBTUMsS0FDdEIzRSxFQUFZNkIsaUJBQWlCM0IsRUFBT1IsZ0JBRWhDZ0IsRUFBZ0JWLEVBQVlJLGNBQWNGLEVBQU9QLHNCQUV2RGtCLEVBQWtCQyxFQUFXSixFQUFlUixHQUU1Q1ksRUFBVWdCLFFBQVM3QixJQUNqQkEsRUFBYXNCLGlCQUFpQixRQUFTLFdBdEJUcUQsRUFBQzVFLEVBQWFDLEVBQWNDLEtBQ3ZERCxFQUFhZSxTQUFTQyxNQVF6QmxCLEVBQWVDLEVBQWFDLEVBQWNDLEdBOURoQjJFLEVBQzVCN0UsRUFDQUMsRUFDQTZFLEVBQ0E1RSxLQUVBLE1BQU1DLEVBQWVILEVBQVlJLGNBQWMsSUFBSUgsRUFBYUksWUFDaEVKLEVBQWFLLFVBQVVNLElBQUlWLEVBQU9MLGlCQUNsQ00sRUFBYUssWUFBY3NFLEVBQzNCM0UsRUFBYUcsVUFBVU0sSUFBSVYsRUFBT0osWUFFOUJnRixJQUNGM0UsRUFBYTRFLE1BQU1DLFVBQVksUUEyQy9CSCxDQUNFN0UsRUFDQUMsRUFDQUEsRUFBYWdGLGtCQUNiL0UsSUFpQkEwRSxDQUFtQjVFLEVBQWFDLEVBQWNDLEdBQzlDVyxFQUFrQkMsRUFBV0osRUFBZVIsRUFDOUMsTUFPQXVFLENBQWtCekUsRUFBYUUsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRGVjbGFyaW5nIGEgY29uZmlndXJhdGlvbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGVcclxuLy8gbmVjZXNzYXJ5IGNsYXNzZXMgYW5kIHNlbGVjdG9ycy5cclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzaG93SW5wdXRFcnJvciA9IChcclxuICBmb3JtRWxlbWVudCxcclxuICBpbnB1dEVsZW1lbnQsXHJcbiAgZXJyb3JNZXNzYWdlLFxyXG4gIGNvbmZpZ1xyXG4pID0+IHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5lcnJvckNsYXNzKTtcclxuXHJcbiAgaWYgKGVycm9yTWVzc2FnZSkge1xyXG4gICAgZXJyb3JFbGVtZW50LnN0eWxlLm1hcmdpblRvcCA9IFwiOHB4XCI7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBlbmFibGVCdXR0b24gPSAoYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbGVtZW50LCBpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0LCBjb25maWcpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGVuYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgIHNob3dJbnB1dEVycm9yKFxyXG4gICAgICBmb3JtRWxlbWVudCxcclxuICAgICAgaW5wdXRFbGVtZW50LFxyXG4gICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXHJcbiAgICAgIGNvbmZpZ1xyXG4gICAgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG4gICk7XHJcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xyXG5cclxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZVZhbGlkYXRpb24oY29uZmlnKSB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKTtcclxuICB9KTtcclxufVxyXG4iLCJpbXBvcnQge1xyXG4gIGVuYWJsZVZhbGlkYXRpb24sXHJcbiAgc2V0dGluZ3MsXHJcbiAgcmVzZXRWYWxpZGF0aW9uLFxyXG4gIHNob3dJbnB1dEVycm9yLFxyXG4gIGhpZGVJbnB1dEVycm9yLFxyXG4gIGhhc0ludmFsaWRJbnB1dCxcclxuICBkaXNhYmxlQnV0dG9uLFxyXG4gIGVuYWJsZUJ1dHRvbixcclxuICB0b2dnbGVCdXR0b25TdGF0ZSxcclxuICBjaGVja0lucHV0VmFsaWRpdHksXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMsXHJcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkdvbGRlbiBHYXRlIEJyaWRnZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzctcGhvdG8tYnktZ3JpZmZpbi13b29sZHJpZGdlLWZyb20tcGV4ZWxzLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzMtcGhvdG8tYnktdHViYW51ci1kb2dhbi1mcm9tLXBleGVscy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNC1waG90by1ieS1tYXVyaWNlLWxhc2NoZXQtZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlR1bm5lbCB3aXRoIG1vcm5pbmcgbGlnaHRcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzYtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcclxuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcclxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVzY2FwZShlKSB7XHJcbiAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsLm1vZGFsX2lzLW9wZW5lZFwiKS5mb3JFYWNoKGNsb3NlTW9kYWwpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0dXBNb2RhbChtb2RhbCkge1xyXG4gIGNvbnN0IGNsb3NlQnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcihcclxuICAgIFwiLm1vZGFsX19jbG9zZS1idG4sIC5tb2RhbF9fUHJldmlld2Nsb3NlLWJ0blwiXHJcbiAgKTtcclxuICBpZiAoY2xvc2VCdG4pIHtcclxuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKG1vZGFsKSk7XHJcbiAgfVxyXG5cclxuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XHJcbiAgICBpZiAoZS50YXJnZXQgPT09IG1vZGFsKSB7XHJcbiAgICAgIGNsb3NlTW9kYWwobW9kYWwpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpLmZvckVhY2goc2V0dXBNb2RhbCk7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZUZvcm1FbGVtZW50ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5jb25zdCBlZGl0UHJvZmlsZU5hbWVJbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLW5hbWUtaW5wdXRcIlxyXG4pO1xyXG5jb25zdCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5jb25zdCBwcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuXHJcbmNvbnN0IG5ld1Bvc3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG5cIik7XHJcbmNvbnN0IG5ld1Bvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtbW9kYWxcIik7XHJcbmNvbnN0IG5ld1Bvc3RGb3JtRWxlbWVudCA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5jb25zdCBuZXdQb3N0SW5wdXQgPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWNhcHRpb24taW5wdXRcIik7XHJcbmNvbnN0IHBvc3RMaW5rSW5wdXQgPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlLWlucHV0XCIpO1xyXG5jb25zdCBuZXdQb3N0U3VibWl0QnV0dG9uID1cclxuICBuZXdQb3N0Rm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcclxuXHJcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcclxuY29uc3QgcHJldmlld0ltYWdlRWxlbWVudCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbkVsZW1lbnQgPVxyXG4gIHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG5cclxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xyXG5jb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcblxyXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICBjb25zdCBjYXJkVGl0bGVFbGVtZW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICBjb25zdCBjYXJkSW1hZ2VFbGVtZW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuXHJcbiAgY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICBjYXJkSW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcclxuICBjYXJkSW1hZ2VFbGVtZW50LmFsdCA9IGRhdGEubmFtZTtcclxuXHJcbiAgY29uc3QgbGlrZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XHJcbiAgbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgbGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBkZWxldGVCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbC1idG5cIik7XHJcbiAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9KTtcclxuXHJcbiAgY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcHJldmlld0ltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICBwcmV2aWV3SW1hZ2VFbGVtZW50LmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHByZXZpZXdNb2RhbENhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSwgbWV0aG9kID0gXCJwcmVwZW5kXCIpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGNhcmREYXRhKTtcclxuICBjYXJkTGlzdFttZXRob2RdKGNhcmRFbGVtZW50KTtcclxufVxyXG5cclxuZWRpdFByb2ZpbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudDtcclxuICBlZGl0UHJvZmlsZURlc2NyaXB0aW9uLnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudDtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKFxyXG4gICAgcHJvZmlsZUZvcm1FbGVtZW50LFxyXG4gICAgW2VkaXRQcm9maWxlTmFtZUlucHV0LCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uXSxcclxuICAgIHNldHRpbmdzXHJcbiAgKTtcclxuXHJcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xyXG59KTtcclxuXHJcbm5ld1Bvc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBvcGVuTW9kYWwobmV3UG9zdE1vZGFsKTtcclxufSk7XHJcblxyXG5wcm9maWxlRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBwcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZWRpdFByb2ZpbGVEZXNjcmlwdGlvbi52YWx1ZTtcclxuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xyXG59KTtcclxuXHJcbm5ld1Bvc3RGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHJlbmRlckNhcmQoe1xyXG4gICAgbmFtZTogbmV3UG9zdElucHV0LnZhbHVlLFxyXG4gICAgbGluazogcG9zdExpbmtJbnB1dC52YWx1ZSxcclxuICB9KTtcclxuICBuZXdQb3N0Rm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICBkaXNhYmxlQnV0dG9uKG5ld1Bvc3RTdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcclxuICBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCk7XHJcbn0pO1xyXG5cclxuaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmQpID0+IHJlbmRlckNhcmQoY2FyZCwgXCJhcHBlbmRcIikpO1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XHJcbiJdLCJuYW1lcyI6WyJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNvbmZpZyIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwiZGlzYWJsZUJ1dHRvbiIsImJ1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsImFkZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJlbmFibGVCdXR0b24iLCJvcGVuTW9kYWwiLCJtb2RhbCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUVzY2FwZSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsImtleSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiY2xvc2VCdG4iLCJ0YXJnZXQiLCJlZGl0UHJvZmlsZUJ0biIsImVkaXRQcm9maWxlTW9kYWwiLCJwcm9maWxlRm9ybUVsZW1lbnQiLCJlZGl0UHJvZmlsZU5hbWVJbnB1dCIsImVkaXRQcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlTmFtZUVsZW1lbnQiLCJwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50IiwibmV3UG9zdEJ0biIsIm5ld1Bvc3RNb2RhbCIsIm5ld1Bvc3RGb3JtRWxlbWVudCIsIm5ld1Bvc3RJbnB1dCIsInBvc3RMaW5rSW5wdXQiLCJuZXdQb3N0U3VibWl0QnV0dG9uIiwicHJldmlld01vZGFsIiwicHJldmlld0ltYWdlRWxlbWVudCIsInByZXZpZXdNb2RhbENhcHRpb25FbGVtZW50IiwiY2FyZFRlbXBsYXRlIiwiY2FyZExpc3QiLCJyZW5kZXJDYXJkIiwiY2FyZERhdGEiLCJtZXRob2QiLCJjYXJkRWxlbWVudCIsImRhdGEiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZFRpdGxlRWxlbWVudCIsImNhcmRJbWFnZUVsZW1lbnQiLCJuYW1lIiwic3JjIiwibGluayIsImFsdCIsImxpa2VCdG4iLCJ0b2dnbGUiLCJnZXRDYXJkRWxlbWVudCIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwiaW5wdXQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwiY2FyZCIsInNldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJzdHlsZSIsIm1hcmdpblRvcCIsInZhbGlkYXRpb25NZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==